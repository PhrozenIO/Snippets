var ATargetWindow := 0 // Write here a known window handle

var ACaptionLength := GetWindowTextLength(ATargetWindow);
if (ACaptionLength = 0) and (GetLastError = 0) then
  raise EWindowsException.Create('GetWindowTextLength');

Inc(ACaptionLength);

var ACaption := '<Untitled>';
if ACaptionLength > 0 then begin
  SetLength(ACaption, ACaptionLength); // Alternatively to GetMem

  if GetWindowText(ATargetWindow, PWideChar(ACaption), ACaptionLength) = 0 then
    raise EWindowsException.Create('GetWindowText');
end;

// ...

WriteLn(ACaption);